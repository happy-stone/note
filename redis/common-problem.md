# 一些常见的问题 #

Redis 集群是个好东西。

## 雪崩 ##

请求超过缓存服务器的负载，导致缓存失效，请求都发送到 MySQL 数据库，容易导致 MySQL 宕机。

前：1. Redis 主从+哨兵 或者 redis cluster，避免全盘崩溃。2. 持久化，方便数据恢复。
中：限流，避免 MySQL 超过负载。
后：恢复数据。

## 穿透 ##

大量请求都没有命中缓存（比如非法请求，查询大量非热点文章），导致缓存尚在运行，但是数据库压力突然上升。

使用布隆过滤器，或者缓存空值。（如果数据量特别大可以考虑使用 hbase 做二级缓存，空值放在二级缓存）。

## 击穿 ##

某个 key 访问非常频繁，缓存刚好失效的时候，全部直接请求数据库。

解决：1. 热点数据设置为永远不过期。或者 2. 如果请求数据库，加 Redis 锁，等第一个请求处理完之后，重写设置缓存。
